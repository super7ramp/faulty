dependencies {
    testCompile project(':faulty-api')
    testCompile libraries.junit
    testRuntime libraries.asm
}

test.dependsOn project(':faulty-agent').tasks.jar

test {
    def agentArgs='include=io.github.super7ramp.faulty'
    jvmArgs '-javaagent:' + project(':faulty-agent').tasks.jar.archivePath + '=' + agentArgs
    testLogging {
        // Verbose logging for all tests
        events 'passed', 'skipped', 'failed', 'standardOut', 'standardError'
    }
}